<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Wrong Way 88 â€” 8-bit Motorway</title>
<style>
  :root{
    /* brighter blacks & visible reds */
    --bg:#0a0a0a; --road:#141414; --lane:#3b0c13; --ink:#ff2538; --dim:#9a1420;
    --coin:#ff4a4a; --box:#b3001b; --hud:#0e0e0e; --hudBorder:#32000a; --white:#fff;
  }
  html,body{height:100%;margin:0;background:var(--bg);color:var(--white);font-family:ui-monospace,Menlo,Monaco,"Roboto Mono",monospace}
  .wrap{display:grid;place-items:center;min-height:100%}
  .frame{position:relative;width:min(94vw,980px);height:min(82vh,720px);max-height:95vh;border:3px solid var(--ink);box-shadow:0 0 0 6px #000 inset,0 0 40px rgba(255,0,24,.25);background:#000;border-radius:10px;overflow:hidden}
  canvas{position:absolute;inset:0;width:100%;height:100%;image-rendering:pixelated;image-rendering:crisp-edges;background:#000}
  .hud{position:absolute;left:8px;top:8px;display:flex;gap:8px;align-items:center}
  .card{background:var(--hud);border:2px solid var(--hudBorder);padding:6px 10px;border-radius:6px;color:var(--ink);font-weight:800}
  .card span{color:#fff}
  .right{position:absolute;right:8px;top:8px;display:flex;gap:8px}
  button{cursor:pointer;background:var(--hud);border:2px solid var(--hudBorder);color:#fff;font-weight:800;padding:6px 10px;border-radius:6px}
  .help{position:absolute;left:50%;transform:translateX(-50%);bottom:8px;background:var(--hud);border:2px solid var(--hudBorder);padding:6px 10px;border-radius:6px;color:#ddd;text-align:center}
  .kbd{display:inline-block;min-width:1.6ch;padding:0 .35rem;border:2px solid var(--hudBorder);border-radius:4px;background:#111;color:#fff}
  .title{position:absolute;inset:0;display:grid;place-items:center;background:radial-gradient(ellipse at center, rgba(255,0,32,.15), transparent 60%)}
  .title .card{font-size:clamp(22px,3.2vw,40px);text-align:center;color:#fff;border-color:var(--ink)}
  .title small{display:block;margin-top:6px;color:#bbb}
  .bar{height:10px;background:#240007;border:2px solid var(--hudBorder);border-radius:4px;overflow:hidden}
  .bar>i{display:block;height:100%;background:var(--ink);width:0%}
  .speedo{display:flex;align-items:center;gap:6px}
  .speedo .ticks{display:grid;grid-auto-flow:column;gap:2px}
  .tick{width:6px;height:10px;background:#240007;border:1px solid #3a0008}
  .tick.on{background:var(--ink);border-color:var(--ink)}
  .toast{position:absolute;left:50%;top:10%;transform:translateX(-50%);background:#000a;border:2px solid var(--ink);padding:6px 10px;border-radius:6px;opacity:0;transition:.2s}
  .toast.show{opacity:1}
</style>
</head>
<body>
<div class="wrap">
  <div class="frame">
    <canvas id="game" width="320" height="180" aria-label="Wrong Way 88"></canvas>

    <div class="hud">
      <div class="card">Score: <span id="score">0</span></div>
      <div class="card">High: <span id="hi">0</span></div>
      <div class="card speedo">
        <span>SPEED</span><div class="ticks" id="speedTicks"></div>
      </div>
      <div class="card" style="min-width:180px">BOOST <div class="bar"><i id="boostFill"></i></div></div>
    </div>
    <div class="right">
      <button id="muteBtn" title="Mute/Unmute">ðŸ”Š</button>
      <button id="restartBtn" title="Restart">â†»</button>
    </div>
    <div class="help">
      <b>Controls</b> â€” <span class="kbd">A</span>/<span class="kbd">D</span> steer Â· <span class="kbd">S</span> brake (hold + steer = drift) Â· <span class="kbd">W</span> boost Â· auto-accel
    </div>

    <div class="toast" id="toast">+3s BOOST</div>

    <div class="title" id="title">
      <div class="card">
        <div style="color:var(--ink);font-weight:900;letter-spacing:1px;">WRONG WAY 88</div>
        <small>Press <span class="kbd">W</span> / any key to start.</small>
      </div>
    </div>
  </div>
</div>

<script>
(() => {
  const c = document.getElementById('game');
  const ctx = c.getContext('2d', {alpha:false}); ctx.imageSmoothingEnabled=false;
  const W=c.width, H=c.height;

  // UI
  const scoreEl=document.getElementById('score');
  const hiEl=document.getElementById('hi');
  const boostFill=document.getElementById('boostFill');
  const title=document.getElementById('title');
  const toast=document.getElementById('toast');
  const restartBtn=document.getElementById('restartBtn');
  const muteBtn=document.getElementById('muteBtn');
  const speedTicks=document.getElementById('speedTicks');
  for(let i=0;i<12;i++){ const t=document.createElement('i'); t.className='tick'; speedTicks.appendChild(t); }
  const tickEls=[...document.querySelectorAll('.tick')];

  // Palette
  const COL={bg:"#0a0a0a", road:getComputedStyle(document.documentElement).getPropertyValue('--road').trim(),
             lane:getComputedStyle(document.documentElement).getPropertyValue('--lane').trim(),
             red:getComputedStyle(document.documentElement).getPropertyValue('--ink').trim(),
             dim:getComputedStyle(document.documentElement).getPropertyValue('--dim').trim(),
             coin:getComputedStyle(document.documentElement).getPropertyValue('--coin').trim(),
             box:getComputedStyle(document.documentElement).getPropertyValue('--box').trim(),
             white:"#fff", smoke:"#aa0012"};

  // Audio
  let AC,master,musicGain,sfxGain,muted=false;
  function initAudio(){ if(AC) return;
    AC=new (window.AudioContext||window.webkitAudioContext)();
    master=AC.createGain(); master.gain.value=0.9; master.connect(AC.destination);
    musicGain=AC.createGain(); musicGain.gain.value=0.25; musicGain.connect(master);
    sfxGain=AC.createGain(); sfxGain.gain.value=0.35; sfxGain.connect(master);
    startMusic();
  }
  function note(f,t,d,type='square',vol=0.2){ const o=AC.createOscillator(), g=AC.createGain(); o.type=type; o.frequency.value=f; g.gain.value=vol; o.connect(g).connect(sfxGain); o.start(t); g.gain.setValueAtTime(vol,t); g.gain.exponentialRampToValueAtTime(0.0001,t+d); o.stop(t+d+0.02); }
  function noise(t=AC.currentTime,d=0.2,vol=0.35){ const b=AC.createBuffer(1,AC.sampleRate*d,AC.sampleRate); const ch=b.getChannelData(0); for(let i=0;i<ch.length;i++){ ch[i]=(Math.random()*2-1)*(1-i/ch.length);} const s=AC.createBufferSource(); const g=AC.createGain(); g.gain.value=vol; s.buffer=b; s.connect(g).connect(sfxGain); s.start(t); }
  function sfxCoin(){ if(!AC||muted) return; const t=AC.currentTime; note(800,t,.06); note(1200,t+.06,.05); }
  function sfxBox(){ if(!AC||muted) return; const t=AC.currentTime; note(500,t,.05); note(900,t+.05,.05); note(1300,t+.10,.08); }
  function sfxCrash(){ if(!AC||muted) return; noise(); }
  function sfxDrift(){ if(!AC||muted) return; note(180,AC.currentTime,.05,'triangle',.2); }
  function startMusic(){
    const t0=AC.currentTime+.05, tempo=110, beat=60/tempo, scale=[220,277,330,392];
    for(let bar=0;bar<8;bar++){
      for(let s=0;s<16;s++){
        const t=t0+(bar*16+s)*beat/2;
        const f=scale[s%4]*(s%8<4?1:2);
        const o=AC.createOscillator(), g=AC.createGain(); o.type='square'; o.frequency.value=f; g.gain.value=.08;
        o.connect(g).connect(musicGain); o.start(t); g.gain.exponentialRampToValueAtTime(.0001,t+beat*.45); o.stop(t+beat*.5);
      }
      for(let k=0;k<4;k++){ const t=t0+(bar*4+k)*beat; const o=AC.createOscillator(), g=AC.createGain(); o.type='sine'; o.frequency.setValueAtTime(120,t); o.frequency.exponentialRampToValueAtTime(60,t+.05); g.gain.value=.18; o.connect(g).connect(musicGain); o.start(t); g.gain.exponentialRampToValueAtTime(.0001,t+.08); o.stop(t+.1); }
    }
    setTimeout(()=>{ if(AC && !muted) startMusic(); }, (8*16*beat/2)*1000 - 200);
  }
  muteBtn.onclick=()=>{ muted=!muted; if(!AC) initAudio(); master.gain.value=muted?0:0.9; muteBtn.textContent=muted?"ðŸ”‡":"ðŸ”Š"; };

  // Input
  const keys=new Set();
  function onKey(e,down){
    const k=e.code;
    if(["KeyA","KeyD","KeyS","KeyW","ArrowLeft","ArrowRight","Space","Enter"].includes(k)) e.preventDefault();
    if(down) keys.add(k); else keys.delete(k);
    if(down && !state.started){ state.started=true; state.paused=false; title.style.display='none'; initAudio(); if(AC?.state==='suspended') AC.resume(); }
  }
  addEventListener('keydown',e=>onKey(e,true));
  addEventListener('keyup',e=>onKey(e,false));
  document.getElementById('restartBtn').onclick=()=>reset();

  // Game state
  const MAX_BOOST=10.0;
  let state;
  function reset(){
    state={
      started:false, paused:true, over:false,
      player:{x:W/2,y:H-24,vx:0,laneW:W*0.46,drift:false,driftDir:0,driftTrail:[]},
      speed:90, baseSpeed:90, boost:0, boosting:false, boostLock:0,
      score:0, hi:Number(localStorage.getItem('ww88_hi')||0),
      spawnT:0, coinT:0, bbT:0.3, overheadT:2, boxT:1.5,
      cars:[], coins:[], boxes:[], billboards:[], gantries:[],
      roadY:10
    };
    // Immediate spawn so screen isnâ€™t empty
    const laneLeft=(W-state.player.laneW)/2, laneSize=state.player.laneW/5;
    state.cars.push({x: laneLeft+laneSize*3.5, y:-20, speed:140, w:18, h:26});
    state.coins.push({x: laneLeft+laneSize*1.5, y:-12});
    state.boxes.push({x: laneLeft+laneSize*0.5, y:-30, t:0});
    updateHud(); title.style.display='';
  }
  reset();

  // Helpers
  const rand=(a,b)=>Math.random()*(b-a)+a;
  const rint=(a,b)=>Math.floor(rand(a,b+1));
  const clamp=(v,a,b)=>v<a?a:(v>b?b:v);

  // Spawning
  function spawn(dt){
    state.spawnT-=dt; state.coinT-=dt; state.bbT-=dt; state.overheadT-=dt; state.boxT-=dt;
    const laneLeft=(W-state.player.laneW)/2, laneSize=state.player.laneW/5;
    if(state.spawnT<=0){ const lane=rint(0,4); const x=laneLeft+laneSize*(lane+.5); const s=rand(120,180)*(1+state.score/400); state.cars.push({x,y:-30,speed:s,w:18,h:26}); state.spawnT=clamp(0.9-state.score/250,0.22,0.9); }
    if(state.coinT<=0){ const lane=rint(0,4); const x=laneLeft+laneSize*(lane+.5); state.coins.push({x,y:-20}); state.coinT=rand(0.5,1.2); }
    if(state.boxT<=0){ const lane=rint(0,4); const x=laneLeft+laneSize*(lane+.5); state.boxes.push({x,y:-20,t:0}); state.boxT=rand(4,7); }
    if(state.bbT<=0){ const side=Math.random()<.5?-1:1; state.billboards.push({side,y:-50,x: side<0? laneLeft-18 : laneLeft+state.player.laneW+18, txt:ad(), overhead:false}); state.bbT=rand(1.0,1.8); }
    if(state.overheadT<=0){ state.gantries.push({y:-10, txt:ad()}); state.overheadT=rand(6,10); }
  }
  function ad(){ const A=["WALKMAN","VHS MAX","NEON COLA","HI-FI 2000","SYNTH","LASER DISC","8-BIT BITES","CASSETTE","REDLINE OIL","ARCADE","BOOMBOX","PAGER"]; return A[rint(0,A.length-1)]; }

  // Update
  function update(dt){
    if(state.paused || !state.started || state.over) return;
    state.baseSpeed=clamp(state.baseSpeed+dt*2,90,180);
    const L=keys.has('KeyA')||keys.has('ArrowLeft'), R=keys.has('KeyD')||keys.has('ArrowRight'), B=keys.has('KeyS'), Wk=keys.has('KeyW');
    const drifting = B && (L||R);
    if(drifting && !state.player.drift) sfxDrift();
    state.player.drift=drifting; state.player.driftDir= drifting ? (L?-1:1) : 0;
    if(drifting) state.boost=clamp(state.boost+dt,0,MAX_BOOST);
    if(state.boost>0 && Wk && state.boostLock<=0){ state.boosting=true; state.boost-=dt; } else state.boosting=false;
    if(state.boosting && B){ state.boosting=false; state.boostLock=.35; } state.boostLock=Math.max(0,state.boostLock-dt);

    const laneLeft=(W-state.player.laneW)/2, maxL=laneLeft+6, maxR=laneLeft+state.player.laneW-6;
    let lateral=120*(state.boosting?1.1:1)*(B?0.7:1); if(drifting) lateral*=1.25;
    if(L) state.player.x-=lateral*dt; if(R) state.player.x+=lateral*dt; state.player.x=clamp(state.player.x,maxL,maxR);

    const sp=(state.baseSpeed+(state.boosting?90:0)-(B?40:0)); state.speed=sp; state.roadY=(state.roadY+sp*dt)%20;

    const move=(arr,m=1)=>{ for(let i=arr.length-1;i>=0;i--){ const o=arr[i]; o.y+=sp*dt*m; if(o.y>H+40) arr.splice(i,1); } };
    move(state.cars,1); move(state.coins,1); move(state.boxes,1);
    for(let i=state.billboards.length-1;i>=0;i--){ const b=state.billboards[i]; b.y+=sp*dt*.65; if(b.y>H+60) state.billboards.splice(i,1); }
    for(let i=state.gantries.length-1;i>=0;i--){ const g=state.gantries[i]; g.y+=sp*dt*.9; if(g.y>H+40) state.gantries.splice(i,1); }

    const hit=(ax,ay,aw,ah,bx,by,bw,bh)=> Math.abs(ax-bx)<(aw/2+bw/2) && Math.abs(ay-by)<(ah/2+bh/2);
    const px=state.player.x, py=state.player.y, pw=14, ph=22;

    for(let i=state.coins.length-1;i>=0;i--){ const o=state.coins[i]; if(hit(px,py,pw,ph,o.x,o.y,8,8)){ state.coins.splice(i,1); state.score+=1; sfxCoin(); } }
    for(let i=state.boxes.length-1;i>=0;i--){ const o=state.boxes[i]; o.t+=dt; if(hit(px,py,pw,ph,o.x,o.y,10,10)){ state.boxes.splice(i,1); if(Math.random()<.55){ state.boost=clamp(state.boost+3,0,MAX_BOOST); toastMsg("+3s BOOST"); sfxBox(); } else { const add=(2+Math.random()*4|0); state.score+=add; toastMsg("+"+add+" COINS"); sfxCoin(); } } }
    for(const car of state.cars){ if(hit(px,py,pw,ph,car.x,car.y,car.w,car.h)){ sfxCrash(); return gameOver(); } }

    updateHud();
    spawn(dt);

    if(state.player.drift){
      state.player.driftTrail.push({x:px-4*state.player.driftDir,y:py+8,a:1});
      if(state.player.driftTrail.length>60) state.player.driftTrail.shift();
    }
    for(let i=state.player.driftTrail.length-1;i>=0;i--){ const t=state.player.driftTrail[i]; t.a-=dt*1.6; if(t.a<=0) state.player.driftTrail.splice(i,1); }
  }

  function gameOver(){
    state.over=true; state.paused=true;
    if(state.score>state.hi){ state.hi=state.score; localStorage.setItem('ww88_hi',state.hi); }
    title.style.display='';
    title.querySelector('.card').innerHTML = `<div style="color:${COL.red||'#ff2538'};font-weight:900;letter-spacing:1px;">CRASHED</div>
      <small>Score: ${state.score} Â· High: ${state.hi}</small>
      <small>Press any key to retry.</small>`;
  }

  function updateHud(){
    scoreEl.textContent=state.score; hiEl.textContent=state.hi;
    boostFill.style.width=((state.boost/MAX_BOOST)*100).toFixed(1)+'%';
    const n=Math.round(clamp((state.speed-60)/140,0,1)*tickEls.length);
    tickEls.forEach((t,i)=>t.className='tick'+(i<n?' on':'')); 
  }

  function toastMsg(txt){ toast.textContent=txt; toast.classList.add('show'); clearTimeout(toastMsg._t); toastMsg._t=setTimeout(()=>toast.classList.remove('show'),700); }

  // Drawing
  function draw(){
    ctx.fillStyle=COL.bg; ctx.fillRect(0,0,W,H);
    const laneW=state.player.laneW, roadX=(W-laneW)/2;
    ctx.fillStyle=COL.road; ctx.fillRect(roadX,0,laneW,H);

    // shoulders
    ctx.fillStyle="#0b0b0b"; ctx.fillRect(roadX-4,0,4,H); ctx.fillRect(roadX+laneW,0,4,H);

    // bright red dashed lane lines
    ctx.fillStyle=COL.lane;
    const seg=20, yOff=(H-(state.roadY%seg));
    for(let i=0;i<Math.ceil(H/seg)+1;i++){
      const yy=yOff-i*seg;
      for(let l=1;l<5;l++){
        const x=Math.round(roadX + (laneW/5)*l - 1);
        ctx.fillRect(x,yy,2,12);
      }
      // center dashed stripe brighter to guarantee motion cue
      ctx.fillStyle=COL.red; ctx.fillRect(Math.round(W/2-1),yy,2,12); ctx.fillStyle=COL.lane;
    }

    // roadside billboards
    for(const b of state.billboards) drawBillboard(b);
    for(const g of state.gantries) drawGantry(g);

    for(const o of state.coins) drawCoin(o);
    for(const b of state.boxes) drawBox(b);
    for(const car of state.cars) drawCar(car);

    // drift tracks
    for(const t of state.player.driftTrail){ ctx.globalAlpha=Math.max(0,Math.min(1,t.a))*0.85; ctx.fillStyle=COL.smoke; ctx.fillRect(Math.round(t.x),Math.round(t.y),2,4); ctx.globalAlpha=1; }

    drawBike(state.player.x,state.player.y,state.player.drift?state.player.driftDir:0);
  }

  function drawBike(x,y,tilt){
    ctx.fillStyle="#101010"; // tyres
    ctx.fillRect(Math.round(x-4),Math.round(y-12),8,6);
    ctx.fillRect(Math.round(x-4),Math.round(y+6),8,6);
    ctx.fillStyle=COL.red; // body
    ctx.fillRect(Math.round(x-3),Math.round(y-6),6,14);
    ctx.fillRect(Math.round(x-8),Math.round(y-8),16,2); // bars
    ctx.fillStyle="#2a0006"; ctx.fillRect(Math.round(x-2),Math.round(y-2),4,3); // visor
    if(tilt){ ctx.fillStyle=COL.dim; ctx.fillRect(Math.round(x+tilt*5),Math.round(y-5),2,10); }
  }
  function drawCar(o){
    ctx.fillStyle=COL.red; ctx.fillRect(Math.round(o.x-9),Math.round(o.y-13),18,26);
    ctx.fillStyle=COL.dim; ctx.fillRect(Math.round(o.x-7),Math.round(o.y-9),14,8);
    ctx.fillStyle="#101010"; ctx.fillRect(Math.round(o.x-8),Math.round(o.y-12),16,4); ctx.fillRect(Math.round(o.x-8),Math.round(o.y+8),16,4);
  }
  function drawCoin(o){
    ctx.fillStyle=COL.coin; ctx.fillRect(Math.round(o.x-3),Math.round(o.y-3),6,6);
    ctx.fillStyle="#7a000d"; ctx.fillRect(Math.round(o.x-1),Math.round(o.y-1),2,2);
  }
  function drawBox(o){
    ctx.fillStyle=COL.box; ctx.fillRect(Math.round(o.x-5),Math.round(o.y-5),10,10);
    if((Math.floor((o.t||0)*6)%2)===0){ ctx.fillStyle=COL.red; ctx.fillRect(Math.round(o.x-1),Math.round(o.y-3),2,2); ctx.fillRect(Math.round(o.x-1),Math.round(o.y),2,2); ctx.fillRect(Math.round(o.x-1),Math.round(o.y+3),2,2); }
  }
  function drawBillboard(b){
    ctx.fillStyle=COL.box; const w=34,h=18;
    ctx.fillRect(Math.round(b.x-(b.side<0?w:0)),Math.round(b.y),w,h);
    ctx.fillStyle="#240007"; const px=b.side<0? b.x-2 : b.x+2; ctx.fillRect(Math.round(px),Math.round(b.y+h),2,6);
    ctx.fillStyle=COL.white; tinyText(b.side<0?Math.round(b.x-w+3):Math.round(b.x+3),Math.round(b.y+6),b.txt);
  }
  function drawGantry(g){
    const laneW=state.player.laneW, roadX=(W-laneW)/2;
    ctx.fillStyle="#240007"; ctx.fillRect(roadX-8,Math.round(g.y)+10,laneW+16,4);
    const w=60,h=14; ctx.fillStyle=COL.box; ctx.fillRect(Math.round(W/2-w/2),Math.round(g.y),w,h);
    ctx.fillStyle=COL.white; tinyText(Math.round(W/2-w/2+6),Math.round(g.y+4),g.txt);
  }
  function tinyText(x,y,txt){ ctx.fillStyle=COL.white; for(let i=0;i<txt.length;i++){ drawChar(x+i*5,y,txt[i].toUpperCase(),1); } }
  function drawChar(x,y,ch,s){ const code=ch.charCodeAt(0); for(let cx=0;cx<3;cx++){ for(let cy=0;cy<5;cy++){ const on=((code+cx*7+cy*11)%5)<3; if(on) ctx.fillRect(x+cx*s,y+cy*s,s,s); } } }

  // Loop
  let last=performance.now();
  function loop(t){
    const dt=Math.min(0.05,(t-last)/1000); last=t;
    if(!state.paused && state.started && !state.over) update(dt);
    draw();
    if(state.over && (keys.has('Enter')||keys.has('Space'))) reset();
    requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);
})();
</script>
</body>
</html>
